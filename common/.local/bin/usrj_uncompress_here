#!/bin/bash

# If file is tar
if [[ "$1" == *.tar.* ]]; then
  FILE_PATH_NO_EXT="${1%.tar*}"

  # Uncompress first, so next step actually extracts tar  
  7z x -ssp "$1"

  # Extract any format supported by 7z (.zip .7z, .rar, etc.)
  7z x -ssp "$FILE_PATH_NO_EXT.tar"

  # Delete .tar artifact generated at first step
  rm "$FILE_PATH_NO_EXT.tar"

else
  7z x -ssp "$1"

fi
